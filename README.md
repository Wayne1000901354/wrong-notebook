# Smart Wrong Notebook (æ™ºæ…§éŒ¯é¡Œæœ¬)

ä¸€å€‹åŸºæ–¼ AI çš„æ™ºæ…§éŒ¯é¡Œç®¡ç†ç³»çµ±ï¼Œå¹«åŠ©å­¸ç”Ÿé«˜æ•ˆæ•´ç†ã€åˆ†æå’Œè¤‡ç¿’éŒ¯é¡Œã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **ğŸ¤– AI æ™ºæ…§åˆ†æ**ï¼šè‡ªå‹•è­˜åˆ¥é¡Œç›®å…§å®¹ï¼Œç”Ÿæˆè§£æã€çŸ¥è­˜é»æ¨™ç±¤å’ŒåŒé¡ç·´ç¿’é¡Œã€‚
- **âš™ï¸ éˆæ´»çš„ AI é…ç½®**ï¼šæ”¯æ´ **Google Gemini** å’Œ **OpenAI** (åŠç›¸å®¹ä»‹é¢) å…©ç¨® AI æä¾›å•†ï¼Œå¯ç›´æ¥åœ¨ç¶²é è¨­å®šä¸­å‹•æ…‹åˆ‡æ›å’Œé…ç½®ã€‚
- **ğŸ“š å¤šéŒ¯é¡Œæœ¬ç®¡ç†**ï¼šæ”¯æ´æŒ‰ç§‘ç›®ï¼ˆå¦‚æ•¸å­¸ã€ç‰©ç†ã€è‹±èªï¼‰å‰µå»ºå’Œç®¡ç†å¤šå€‹éŒ¯é¡Œæœ¬ã€‚
- **ğŸ·ï¸ æ™ºæ…§æ¨™ç±¤ç³»çµ±**ï¼šè‡ªå‹•æå–çŸ¥è­˜é»æ¨™ç±¤ï¼Œæ”¯æ´è‡ªå®šç¾©æ¨™ç±¤ç®¡ç†ã€‚
- **ğŸ” å¤šç¶­åº¦ç¯©é¸**ï¼šæ”¯æ´æŒ‰æŒæ¡ç‹€æ…‹ã€æ™‚é–“ç¯„åœã€çŸ¥è­˜é»æ¨™ç±¤ã€å¹´ç´šå­¸æœŸã€è©¦å·ç­‰ç´šç­‰å¤šç¨®æ¢ä»¶ç¯©é¸éŒ¯é¡Œã€‚
- **ğŸ–¨ï¸ éˆæ´»åŒ¯å‡ºåˆ—å°**ï¼šä¸€éµåŒ¯å‡ºç¯©é¸å¾Œçš„éŒ¯é¡Œï¼Œæ”¯æ´è‡ªå®šç¾©åˆ—å°å…§å®¹ï¼ˆç­”æ¡ˆ/è§£æ/çŸ¥è­˜é»ï¼‰å’Œåœ–ç‰‡ç¸®æ”¾æ¯”ä¾‹ï¼Œå¯ç›´æ¥åˆ—å°æˆ–å„²å­˜ç‚º PDFã€‚
- **ğŸ“ æ™ºæ…§ç·´ç¿’**ï¼šåŸºæ–¼éŒ¯é¡Œç”Ÿæˆç›¸ä¼¼çš„ç·´ç¿’é¡Œï¼Œéå›ºè–„å¼±ç’°ç¯€ã€‚
- **ğŸ“Š æ•¸æ“šçµ±è¨ˆ**ï¼šè¦–è¦ºåŒ–å±•ç¤ºéŒ¯é¡ŒæŒæ¡æƒ…æ³å’Œå­¸ç¿’é€²åº¦ã€‚
- **ğŸ” ç”¨æˆ¶ç®¡ç†**ï¼šæ”¯æ´å¤šç”¨æˆ¶è¨»å†Šã€ç™»å…¥ï¼Œæ•¸æ“šå®‰å…¨éš”é›¢ã€‚
- **ğŸ›¡ï¸ ç®¡ç†å“¡å¾Œå°**ï¼šæä¾›ç”¨æˆ¶ç®¡ç†åŠŸèƒ½ï¼Œå¯ç¦ç”¨/å•Ÿç”¨ç”¨æˆ¶ã€åˆªé™¤é•è¦ç”¨æˆ¶ã€‚


## ğŸ“¸ è¢å¹•æˆªåœ–åŠŸèƒ½ (HTTPS è¨­å®š)

æœ¬æ‡‰ç”¨çš„è¢å¹•æˆªåœ–åŠŸèƒ½ä¾è³´ç€è¦½å™¨çš„å®‰å…¨ä¸Šä¸‹æ–‡ (HTTPS)ã€‚åœ¨ Docker æˆ–å€åŸŸç¶²è·¯ç’°å¢ƒä¸­ä½¿ç”¨æ™‚ï¼Œè«‹åƒè€ƒ **[HTTPS é…ç½®æŒ‡å—](doc/HTTPS_SETUP.md)** å•Ÿç”¨å…§å»º HTTPS æ”¯æ´ã€‚

## ğŸ“± PWA æ”¯æ´ (æ·»åŠ åˆ°ä¸»ç•«é¢)

æœ¬å°ˆæ¡ˆæ”¯æ´ PWA (Progressive Web App)ï¼Œæ‚¨å¯ä»¥å°‡æ‡‰ç”¨æ·»åŠ åˆ°æ‰‹æ©Ÿä¸»ç•«é¢ï¼Œç²å¾—åŸç”Ÿæ‡‰ç”¨èˆ¬çš„ä½¿ç”¨é«”é©—ã€‚

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- ğŸš€ **å¿«é€Ÿå•Ÿå‹•**ï¼šé»æ“Šä¸»ç•«é¢åœ–ç¤ºç›´æ¥æ‰“é–‹ï¼Œç„¡éœ€è¼¸å…¥ç¶²å€ã€‚
- ğŸ“± **æ²‰æµ¸é«”é©—**ï¼šå…¨è¢å¹•é‹è¡Œï¼Œç„¡ç€è¦½å™¨ç¶²å€åˆ—å¹²æ“¾ã€‚
- ğŸ¨ **åŸè‰²é©é…**ï¼šæ‡‰ç”¨åœ–ç¤ºå’Œå•Ÿå‹•ç•«é¢é©é…ç³»çµ±ä¸»é¡Œã€‚

**ä½¿ç”¨æ–¹æ³•**ï¼š

- **iPhone / iPad (Safari)**: é»æ“Šåº•éƒ¨ **åˆ†äº«** æŒ‰éˆ• -> é¸æ“‡ **"åŠ å…¥ä¸»ç•«é¢"**ã€‚
- **Android (Chrome)**: é»æ“Šå³ä¸Šè§’ **é¸å–®** -> é¸æ“‡ **"åŠ åˆ°ä¸»ç•«é¢"** æˆ– **"å®‰è£æ‡‰ç”¨ç¨‹å¼"**ã€‚

## ğŸ› ï¸ æŠ€è¡“æ£§

- **æ¡†æ¶**: [Next.js 16](https://nextjs.org/) (App Router)
- **UI åº«**: [React 19](https://react.dev/)
- **è³‡æ–™åº«**: [SQLite](https://www.sqlite.org/) (via [Prisma](https://www.prisma.io/))
- **æ¨£å¼**: [Tailwind CSS v4](https://tailwindcss.com/) + [Shadcn UI](https://ui.shadcn.com/)
- **AI**: Google Gemini API / OpenAI API / Azure OpenAI
- **èªè­‰**: [NextAuth.js](https://next-auth.js.org/)

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Docker éƒ¨ç½²

#### 1. å•Ÿå‹•æœå‹™

æ‚¨å¯ä»¥é¸æ“‡ **ç›´æ¥ä½¿ç”¨æŒ‡ä»¤** (é©åˆå¿«é€Ÿæ¸¬è©¦) æˆ– **Docker Compose** (é©åˆé•·æœŸé‹è¡Œ)ã€‚

**é¸é … Aï¼šç›´æ¥ä½¿ç”¨ Docker æŒ‡ä»¤**

```bash
docker run -d --name wrong-notebook \
  -e NEXTAUTH_SECRET="your_secret_key" \
  -p 3000:3000 \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/config:/app/config \
  ghcr.io/wttwins/wrong-notebook
```

**é¸é … Bï¼šä½¿ç”¨ Docker Compose (æ¨è–¦)**

ä½¿ç”¨ `docker-compose.yml` æª”æ¡ˆé€²è¡Œç®¡ç†ã€‚

1.  **ä¸‹è¼‰é…ç½®æª”æ¡ˆ**ï¼š
    ```bash
    curl -o docker-compose.yml https://raw.githubusercontent.com/wttwins/wrong-notebook/refs/heads/main/docker-compose.yml
    ```
2.  **å•Ÿå‹•æœå‹™**ï¼š
    ```bash
    docker-compose up -d
    ```
3.  **æŸ¥çœ‹æ—¥èªŒ**ï¼š
    ```bash
    docker-compose logs -f
    ```
4.  **åœæ­¢æœå‹™**ï¼š
    ```bash
    docker-compose down
    ```

### æ–¹å¼äºŒï¼šæœ¬åœ°åŸå§‹ç¢¼é‹è¡Œ

#### 1. å…‹éš†å€‰åº«

```bash
git clone https://github.com/wttwins/wrong-notebook.git
cd wrong-notebook
```

#### 2. ç’°å¢ƒæº–å‚™

ç¢ºä¿å·²å®‰è£ Node.js (v18+) å’Œ npmã€‚

#### 3. å®‰è£ä¾è³´

```bash
npm install
```

#### 4. é…ç½®ç’°å¢ƒè®Šæ•¸

è¤‡è£½ `.env.example` ç‚º `.env` ä¸¦å¡«å…¥å¿…è¦çš„é…ç½®ï¼š

```bash
cp .env.example .env
```

**åŸºç¤é…ç½®**

| ç’°å¢ƒè®Šæ•¸ | æè¿° | é è¨­å€¼ | èªªæ˜ |
| :--- | :--- | :--- | :--- |
| `DATABASE_URL` | è³‡æ–™åº«é€£æ¥ä½å€ | `file:./dev.db` | SQLite è³‡æ–™åº«è·¯å¾‘ |
| `NEXTAUTH_SECRET` | Auth é‡‘é‘° | ç„¡ | ç”¨æ–¼åŠ å¯† Sessionï¼Œç”Ÿç”¢ç’°å¢ƒå»ºè­°è¨­å®š,å¯ä»¥ä½¿ç”¨ openssl rand -base64 32 ç”Ÿæˆä¸€å€‹éš¨æ©Ÿå­—ä¸²ä½œç‚ºé‡‘é‘° |
| `NEXTAUTH_URL` | è¨ªå•ä½å€ | `http://your-domain-name:3000` | éƒ¨ç½²å¾Œçš„è¨ªå•ä½å€ |
| `AUTH_TRUST_HOST` | ä¿¡ä»»ä¸»æ©Ÿé ­ | `true` | è¨­å®šç‚º `true` æ™‚è‡ªå‹•æ¨æ–· URLï¼Œé©åˆ Docker/PaaS |
| `LOG_LEVEL` | æ—¥èªŒç´šåˆ¥ | `debug` (é–‹ç™¼) / `info` (ç”Ÿç”¢) | å¯é¸å€¼ï¼š`trace`, `debug`, `info`, `warn`, `error`, `fatal` |
| `HTTP_PROXY` | HTTP ä»£ç† | ç„¡ | è¨­å®š HTTP ä»£ç† |
| `HTTPS_PROXY` | HTTPS ä»£ç† | ç„¡ | è¨­å®š HTTPS ä»£ç† |

**AI é…ç½®**

| ç’°å¢ƒè®Šæ•¸ | æè¿° | é è¨­å€¼ | èªªæ˜ |
| :--- | :--- | :--- | :--- |
| `AI_PROVIDER` | AI æä¾›å•† | `gemini` | å¯é¸ `gemini`, `openai` æˆ– `azure` |
| `GOOGLE_API_KEY` | Gemini API Key | ç„¡ | ä½¿ç”¨ Gemini æ™‚å¿…å¡« |
| `GEMINI_BASE_URL` | Gemini API ä½å€ | ç„¡ | å¯é¸ï¼Œç”¨æ–¼è‡ªå®šç¾© API ä½å€ |
| `GEMINI_MODEL` | Gemini æ¨¡å‹ | `gemini-2.5-flash` | å¯é¸ï¼Œå¦‚ `gemini-3.0-flash` |
| `OPENAI_API_KEY` | OpenAI API Key | ç„¡ | ä½¿ç”¨ OpenAI æ™‚å¿…å¡« |
| `OPENAI_BASE_URL` | OpenAI API ä½å€ | ç„¡ | å¯é¸ï¼Œç”¨æ–¼ç›¸å®¹çš„ API æœå‹™ |
| `OPENAI_MODEL` | OpenAI æ¨¡å‹ | `gpt-4o` | å¯é¸ï¼Œå¦‚ `gpt-4o` |
| `AZURE_OPENAI_API_KEY` | Azure API Key | ç„¡ | ä½¿ç”¨ Azure OpenAI æ™‚å¿…å¡« |
| `AZURE_OPENAI_ENDPOINT` | Azure Endpoint | ç„¡ | Azure è³‡æºç«¯é»ï¼Œå¦‚ `https://xxx.openai.azure.com` |
| `AZURE_OPENAI_DEPLOYMENT` | éƒ¨ç½²åç¨± | ç„¡ | Azure æ¨¡å‹éƒ¨ç½²åç¨± |
| `AZURE_OPENAI_API_VERSION` | API ç‰ˆæœ¬ | `2024-02-15-preview` | å¯é¸ï¼ŒAzure API ç‰ˆæœ¬ |
| `AZURE_OPENAI_MODEL` | Azure æ¨¡å‹ | `gpt-4o` | å¯é¸ï¼Œé¡¯ç¤ºçš„æ¨¡å‹åç¨± |

#### 5. åˆå§‹åŒ–è³‡æ–™åº«

```bash
npx prisma migrate dev
npx prisma db seed
```

#### 6. ç®¡ç†å“¡å¸³æˆ¶

é è¨­ç®¡ç†å“¡å¸³æˆ¶ï¼š
- **ä¿¡ç®±**: `admin@localhost`
- **å¯†ç¢¼**: `123456`

> ç®¡ç†å“¡ç™»å…¥å¾Œï¼Œå¯åœ¨ã€Œè¨­å®šã€ -> ã€Œç”¨æˆ¶ç®¡ç†ã€ä¸­ç®¡ç†ç³»çµ±ç”¨æˆ¶ã€‚

#### 7. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

```bash
npm run dev
```

è¨ªå• [http://your-domain-name:3000](http://your-domain-name:3000) é–‹å§‹ä½¿ç”¨ã€‚

## âš™ï¸ AI æ¨¡å‹é…ç½®

æœ¬å°ˆæ¡ˆæ”¯æ´å‹•æ…‹é…ç½® AI æ¨¡å‹ï¼Œç„¡éœ€é‡å•Ÿä¼ºæœå™¨ã€‚

1.  **é€²å…¥è¨­å®š**ï¼šé»æ“Šé¦–é å³ä¸Šè§’çš„è¨­å®šåœ–ç¤ºã€‚
2.  **é¸æ“‡æä¾›å•†**ï¼šæ”¯æ´ Google Gemini, OpenAI (æˆ–ç›¸å®¹ API) å’Œ **Azure OpenAI**ã€‚
3.  **å¡«å¯«åƒæ•¸**ï¼š
    *   **é€šç”¨åƒæ•¸**: API Key, Base URL (æˆ– Endpoint), Model Name (æˆ– Deployment Name)ã€‚
    *   **Azure ç‰¹æœ‰**: Deployment Name (éƒ¨ç½²åç¨±), API Version (API ç‰ˆæœ¬)ã€‚
4.  **å„²å­˜ç”Ÿæ•ˆ**ï¼šé»æ“Šå„²å­˜å¾Œå³åˆ»ç”Ÿæ•ˆã€‚

> **æ³¨æ„**ï¼šç¶²é é…ç½®æœƒå„²å­˜åˆ° `config/app-config.json` æª”æ¡ˆä¸­ï¼Œè©²æª”æ¡ˆçš„å„ªå…ˆç´šé«˜æ–¼ `.env` ç’°å¢ƒè®Šæ•¸ã€‚

## ğŸ› ï¸ å¯¦ç”¨è…³æœ¬

åœ¨ `scripts/` ç›®éŒ„ä¸‹æä¾›äº†ä¸€äº›å¯¦ç”¨è…³æœ¬ï¼Œç”¨æ–¼ç¶­è­·å’Œé™¤éŒ¯ï¼š

- **é‡ç½®å¯†ç¢¼**:
  ```bash
  node scripts/reset-password.js <ä¿¡ç®±> <æ–°å¯†ç¢¼>
  ```
  ç¯„ä¾‹:  
  ```bash
  node scripts/reset-password.js user@example.com 123456 
  ```

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

MIT License
